# 主键索引和唯一索引的区别

## 什么是主键索引

主键索引是数据库表中的一种索引类型，用于唯一标识表中的每一行数据。在主键索引中，索引列的值必须是唯一的且不为空，通常用来加速对表中数据的检索和查询操作。

1. 唯一性：主键索引要求索引列的值在整个表中是唯一的，这意味着每一行数据都可以通过主键索引进行精确的查找和定位。
2. 必须非空：主键索引的列值不能为空，因为它们用来标识每一行数据，因此不能为空值会违反唯一性约束。
3. 快速检索：由于主键索引要求值的唯一性，数据库系统会对主键索引进行高效的数据结构组织，通常使用 B+ 树等数据结构，以便快速地进行数据检索和查询操作。
4. 默认聚簇索引：在一些数据库系统中，主键索引通常也会被用作表的聚簇索引，这意味着数据存储在主键索引的叶子节点上，可以加速按主键的范围扫描和连接操作。

## 什么是唯一索引

唯一索引是数据库表中一种索引类型，用于确保索引列中的数值或者字符串是唯一的，即不允许重复值存在。与主键索引不同的是，唯一索引允许空值（NULL 值），但要求非空的值在索引列中必须是唯一的。

1. 确保唯一性：唯一索引可以确保索引列中的值是唯一的，不允许出现重复值。这有助于维护数据的完整性和准确性。
2. 允许空值：与主键索引不同，唯一索引允许索引列中的值出现空值（NULL），只要非空值是唯一的即可。
3. 提高检索效率：唯一索引可以加速对表中数据的检索和查询操作，因为数据库系统会使用类似于 B+ 树等数据结构来组织唯一索引，以便快速查找数据。

## 聚簇索引和非聚簇索引的区别

聚簇索引和非聚簇索引是数据库中两种不同类型的索引结构，它们在索引数据的存储方式和工作原理上有所区别。

1. **聚簇索引**：
   - 聚簇索引指的是将索引键值和数据行存储在一起的索引结构。换句话说，聚簇索引决定了表中数据行的物理排序方式。
   - 表中只能有一个聚簇索引，因为数据行只能按照一种方式来排序存储。
   - 聚簇索引的叶子节点包含了实际的数据行，因此通过聚簇索引可以直接定位到数据行，加快数据检索的速度。
   - 聚簇索引通常用于主键索引，因为主键要求唯一性且非空，适合作为数据行的物理排序方式。
2. **非聚簇索引**：
   - 非聚簇索引指的是将索引键值和指向数据行的指针分开存储的索引结构。索引键值存储在索引树中，而数据行存储在表的数据页中。
   - 表中可以有多个非聚簇索引，因为索引键值和数据行的存储是分开的。
   - 非聚簇索引的叶子节点不包含实际的数据行，而是包含指向数据行的指针，需要先通过索引找到对应的数据行。
   - 非聚簇索引适合用于需要频繁进行范围查询或者不唯一索引的列。

## mysql中有非聚簇索引吗

MySQL 中，所有的索引都是非聚簇索引。MySQL 中的索引实际上是通过 B+ 树或者哈希等数据结构来组织和存储索引键值，而数据行则是单独存储在表的数据页中的。因此，MySQL 中的索引不会直接包含实际的数据行，而是存储指向数据行的引用或指针。

当你在 MySQL 中创建索引时（如普通索引、唯一索引、全文索引等），这些索引都属于非聚簇索引的范畴。非聚簇索引在 MySQL 中是最常见的索引类型，它们可以加速数据的检索和查询操作，提高数据库的性能。

**使用其他存储引擎比如 MyISAM，则主键索引并不是聚簇索引，而是使用单独的索引结构来管理主键。**